% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PH_Functions.R
\name{process_and_monitor}
\alias{process_and_monitor}
\title{process_and_monitor}
\usage{
process_and_monitor(
  expr_matrix,
  i,
  DIM,
  log_message,
  memory_threshold,
  max_time_per_iteration = 20 * 24 * 3600,
  timeout_datasets = NULL,
  results_file = NULL,
  log_file = NULL,
  temp_dataset_dir = "temp_datasets_sct_whole"
)
}
\arguments{
\item{expr_matrix}{A numeric matrix or `dgCMatrix` of expression values.}

\item{i}{Identifier of the dataset.}

\item{DIM}{Dimension for PH computation.}

\item{log_message}{Function for logging messages.}

\item{memory_threshold}{Reserved for future memory checks.}

\item{max_time_per_iteration}{Maximum runtime in seconds (default 12 hours).}

\item{timeout_datasets}{Vector of dataset indices that previously timed out.}
}
\value{
A list with
\describe{
  \item{PD}{The persistence diagram matrix or `NULL` if no valid result was produced.}
  \item{threshold}{The threshold used for the PH run, or `NULL` on failure.}
}
}
\description{
Run persistent homology (PH) on a single expression matrix using
`ripserr::vietoris_rips` from the **ripserr** package. The function chooses an
initial threshold of `-1` unless the dataset previously timed out, in
which case a data-driven estimate is used. The PH computation runs in a
separate process and is killed if it exceeds `max_time_per_iteration`.
}
